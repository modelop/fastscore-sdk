---
title: "R Notebook"
output: html_notebook
---
install dependencies
install.packages(c("curl", "jsonlite", "mime", "openssl", "R6", "yaml", "httr"))

Setup, connect to local fleet
```{r}
library(fastscore)
connect <- Connect(proxy_prefix="https://localhost:8000", insecure = TRUE)
config <- paste(readLines("./config.yaml"), collapse="\r\n")
connect$configure(config)
```
Sys.sleep(3) #give system time to load configuration
engine <- connect$get("engine-1")
mm <- connect$get("model-manage-1")
```
Define load model information
```{r}
mm$model_load_from_file(name = "echo-array-double.R", path = "./library/models/")
mm$schema_load_from_file(name = "array-double", path = "./library/schemas/")
mm$stream_load_from_file(name = "array-double-input", path = "./library/streams/")
mm$stream_load_from_file(name = "array-double-output", path = "./library/streams/")
```
Deploy model
```{r}
engine$input_set(0, mm$stream_get("array-double-input"))
engine$output_set(1, mm$stream_get("array-double-output"))
engine$load_model(mm$model_get("echo-array-double.R"))
```
Stop engine
```{r}
engine$unload_model()
```

